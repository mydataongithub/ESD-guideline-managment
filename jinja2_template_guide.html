<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jinja2 Template Engine Guide</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            min-height: 100vh;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .header {
            text-align: center;
            color: white;
            margin-bottom: 30px;
        }
        
        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        
        .header p {
            font-size: 1.2rem;
            opacity: 0.9;
        }
        
        .concepts-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .concept-card {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            cursor: pointer;
        }
        
        .concept-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 40px rgba(0,0,0,0.15);
        }
        
        .concept-card h3 {
            color: #0066cc;
            margin-bottom: 15px;
            font-size: 1.3rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .concept-card .emoji {
            font-size: 1.5rem;
        }
        
        .demo-section {
            background: white;
            border-radius: 15px;
            padding: 30px;
            margin-top: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }
        
        .demo-section h2 {
            color: #0066cc;
            margin-bottom: 20px;
            font-size: 1.8rem;
        }
        
        .split-view {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin: 20px 0;
        }
        
        .code-panel {
            background: #1a1a1a;
            border-radius: 10px;
            overflow: hidden;
        }
        
        .code-header {
            background: #333;
            color: white;
            padding: 10px 15px;
            font-size: 14px;
            font-weight: bold;
        }
        
        .code-content {
            padding: 20px;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            line-height: 1.4;
            overflow-x: auto;
            color: #e6e6e6;
        }
        
        .output-panel {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 10px;
            overflow: hidden;
        }
        
        .output-header {
            background: #e9ecef;
            padding: 10px 15px;
            font-size: 14px;
            font-weight: bold;
            color: #495057;
        }
        
        .output-content {
            padding: 20px;
            font-family: system-ui;
            font-size: 14px;
            line-height: 1.6;
            white-space: pre-wrap;
        }
        
        .jinja-var { color: #ff6b6b; font-weight: bold; }
        .jinja-filter { color: #4ecdc4; }
        .jinja-control { color: #45b7d1; font-weight: bold; }
        .jinja-comment { color: #95a5a6; font-style: italic; }
        .jinja-string { color: #f39c12; }
        
        .interactive-editor {
            background: #f8f9ff;
            border: 2px solid #e2e8f0;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
        }
        
        .editor-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .editor-column h4 {
            margin-bottom: 10px;
            color: #0066cc;
        }
        
        textarea {
            width: 100%;
            height: 200px;
            padding: 15px;
            border: 1px solid #cbd5e0;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            resize: vertical;
        }
        
        .data-input {
            background: #1a1a1a;
            color: #e6e6e6;
        }
        
        .template-input {
            background: #fff;
            color: #333;
        }
        
        .btn {
            background: #0066cc;
            color: white;
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            transition: background 0.3s ease;
            margin: 10px 5px;
        }
        
        .btn:hover {
            background: #0052a3;
        }
        
        .btn-secondary {
            background: #6c757d;
        }
        
        .btn-secondary:hover {
            background: #5a6268;
        }
        
        .result-panel {
            margin-top: 20px;
            padding: 20px;
            border-radius: 8px;
            font-family: system-ui;
            white-space: pre-wrap;
            min-height: 100px;
        }
        
        .result-success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        
        .result-error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        
        .tabs {
            display: flex;
            border-bottom: 2px solid #e2e8f0;
            margin-bottom: 20px;
        }
        
        .tab {
            padding: 12px 24px;
            background: #f7fafc;
            border: none;
            cursor: pointer;
            font-size: 16px;
            transition: all 0.3s ease;
            border-radius: 5px 5px 0 0;
        }
        
        .tab.active {
            background: #0066cc;
            color: white;
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
        
        .tip {
            background: #e3f2fd;
            border-left: 4px solid #2196f3;
            padding: 15px;
            margin: 15px 0;
            border-radius: 0 8px 8px 0;
        }
        
        .tip strong {
            color: #1976d2;
        }
        
        .example-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        
        .example-card {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 8px;
            padding: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .example-card:hover {
            background: #e9ecef;
            border-color: #0066cc;
        }
        
        .example-card h5 {
            color: #0066cc;
            margin-bottom: 8px;
        }
        
        .example-card code {
            background: #fff;
            padding: 2px 6px;
            border-radius: 3px;
            font-size: 12px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üé® Jinja2 Template Engine</h1>
            <p>Learn from your ESD Guideline Generator project</p>
        </div>

        <div class="concepts-grid">
            <div class="concept-card" onclick="showSection('basics')">
                <h3><span class="emoji">üìù</span> Template Basics</h3>
                <p>Variables, expressions, and basic syntax using examples from your master_template.md</p>
            </div>
            
            <div class="concept-card" onclick="showSection('filters')">
                <h3><span class="emoji">üîß</span> Filters & Functions</h3>
                <p>Transform data with filters like |upper, |default, and custom formatting</p>
            </div>
            
            <div class="concept-card" onclick="showSection('control')">
                <h3><span class="emoji">üîÄ</span> Control Structures</h3>
                <p>Conditionals and loops from your ESD clamp tables and rule lists</p>
            </div>
            
            <div class="concept-card" onclick="showSection('data')">
                <h3><span class="emoji">üìä</span> Complex Data</h3>
                <p>Handle nested objects, arrays, and your technology configurations</p>
            </div>
            
            <div class="concept-card" onclick="showSection('generator')">
                <h3><span class="emoji">‚öôÔ∏è</span> Template Processing</h3>
                <p>How your generator.py loads and renders templates with Python</p>
            </div>
            
            <div class="concept-card" onclick="showSection('playground')">
                <h3><span class="emoji">üß™</span> Live Playground</h3>
                <p>Try your own templates with real data from your project</p>
            </div>
        </div>

        <!-- Template Basics -->
        <div id="basics" class="demo-section" style="display: none;">
            <h2>üìù Template Basics</h2>
            
            <p>Your <code>master_template.md</code> uses Jinja2 syntax to generate ESD guidelines. Let's explore the basic elements:</p>
            
            <div class="split-view">
                <div class="code-panel">
                    <div class="code-header">Template (from your master_template.md)</div>
                    <div class="code-content">
<span class="jinja-comment"># From your actual template</span>
# ESD Guidelines for <span class="jinja-var">{{ technology_name | upper }}</span>

**Technology Node:** <span class="jinja-var">{{ technology_name }}</span>
**Process Type:** <span class="jinja-var">{{ process_type | default("Standard CMOS") }}</span>

## ESD Levels
- **HBM:** <span class="jinja-var">{{ esd_levels.hbm }}</span>
- **CDM:** <span class="jinja-var">{{ esd_levels.cdm }}</span>
                    </div>
                </div>
                
                <div class="output-panel">
                    <div class="output-header">Generated Output</div>
                    <div class="output-content"># ESD Guidelines for 28NM CMOS

**Technology Node:** 28nm CMOS
**Process Type:** 28nm CMOS

## ESD Levels
- **HBM:** 2kV
- **CDM:** 500V</div>
                </div>
            </div>
            
            <div class="tip">
                <strong>Key Syntax:</strong><br>
                ‚Ä¢ <code>{{ variable }}</code> - Output variable value<br>
                ‚Ä¢ <code>{{ object.property }}</code> - Access nested properties<br>
                ‚Ä¢ <code>{{ variable | filter }}</code> - Apply filters to transform data
            </div>
            
            <h3>Real Examples from Your Template</h3>
            <div class="example-grid">
                <div class="example-card" onclick="loadExample('basic-var')">
                    <h5>Simple Variables</h5>
                    <code>{{ technology_name }}</code>
                    <p>Direct variable substitution</p>
                </div>
                
                <div class="example-card" onclick="loadExample('nested-data')">
                    <h5>Nested Objects</h5>
                    <code>{{ esd_levels.hbm }}</code>
                    <p>Access nested properties</p>
                </div>
                
                <div class="example-card" onclick="loadExample('with-filter')">
                    <h5>With Filters</h5>
                    <code>{{ technology_name | upper }}</code>
                    <p>Transform data with filters</p>
                </div>
                
                <div class="example-card" onclick="loadExample('default-values')">
                    <h5>Default Values</h5>
                    <code>{{ process_type | default("Standard CMOS") }}</code>
                    <p>Provide fallback values</p>
                </div>
            </div>
        </div>

        <!-- Filters Section -->
        <div id="filters" class="demo-section" style="display: none;">
            <h2>üîß Filters & Functions</h2>
            
            <p>Filters transform your data before output. Your template uses several built-in filters:</p>
            
            <div class="split-view">
                <div class="code-panel">
                    <div class="code-header">Your Template Filters</div>
                    <div class="code-content">
<span class="jinja-comment"># Real examples from your project</span>

<span class="jinja-comment"># Transform to uppercase</span>
<span class="jinja-var">{{ technology_name | upper }}</span>

<span class="jinja-comment"># Provide default values</span>
<span class="jinja-var">{{ process_type | default("Standard CMOS") }}</span>
<span class="jinja-var">{{ latch_up_rules.guard_ring_width | default("2.0Œºm") }}</span>

<span class="jinja-comment"># Format strings</span>
<span class="jinja-var">{{ category | title }}</span>

<span class="jinja-comment"># Join arrays</span>
<span class="jinja-var">{{ sim.tools | join(", ") }}</span>
                    </div>
                </div>
                
                <div class="output-panel">
                    <div class="output-header">Filter Results</div>
                    <div class="output-content"># Transform to uppercase
28NM CMOS

# Provide default values
28nm CMOS
5.0Œºm

# Format strings
Metal Routing

# Join arrays
Cadence Spectre, Synopsis HSPICE</div>
                </div>
            </div>
            
            <h3>Common Jinja2 Filters in Your Project</h3>
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; margin: 20px 0;">
                <div style="background: #f8f9fa; padding: 15px; border-radius: 8px;">
                    <h4 style="color: #0066cc;">Text Transformation</h4>
                    <ul style="margin-left: 20px;">
                        <li><code>|upper</code> - UPPERCASE text</li>
                        <li><code>|lower</code> - lowercase text</li>
                        <li><code>|title</code> - Title Case</li>
                        <li><code>|capitalize</code> - First letter only</li>
                    </ul>
                </div>
                
                <div style="background: #f8f9fa; padding: 15px; border-radius: 8px;">
                    <h4 style="color: #0066cc;">Data Handling</h4>
                    <ul style="margin-left: 20px;">
                        <li><code>|default("value")</code> - Fallback values</li>
                        <li><code>|length</code> - Count items</li>
                        <li><code>|join(", ")</code> - Combine arrays</li>
                        <li><code>|first</code> - First item</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Control Structures -->
        <div id="control" class="demo-section" style="display: none;">
            <h2>üîÄ Control Structures</h2>
            
            <p>Your template uses conditionals and loops to handle complex logic:</p>
            
            <div class="tabs">
                <button class="tab active" onclick="switchTab('if-else-tab')">If/Else</button>
                <button class="tab" onclick="switchTab('loops-tab')">Loops</button>
                <button class="tab" onclick="switchTab('complex-tab')">Complex Logic</button>
            </div>
            
            <div id="if-else-tab" class="tab-content active">
                <h3>Conditional Content</h3>
                <div class="split-view">
                    <div class="code-panel">
                        <div class="code-header">From your master_template.md</div>
                        <div class="code-content">
<span class="jinja-control">{% if esd_levels.mm is defined %}</span>
- **Machine Model (MM):** <span class="jinja-var">{{ esd_levels.mm }}</span>
<span class="jinja-control">{% endif %}</span>

<span class="jinja-control">{% if advanced_protection_scheme %}</span>
- **Protection Scheme:** Advanced multi-stage protection
- **Details:** <span class="jinja-var">{{ advanced_protection_scheme_details }}</span>
<span class="jinja-control">{% else %}</span>
- **Protection Scheme:** Standard single-stage protection
- **Implementation:** Basic clamp and guard ring approach
<span class="jinja-control">{% endif %}</span>
                        </div>
                    </div>
                    
                    <div class="output-panel">
                        <div class="output-header">Generated Output</div>
                        <div class="output-content">- **Machine Model (MM):** 200V

- **Protection Scheme:** Advanced multi-stage protection
- **Details:** Multi-stage protection with RC-triggered power clamps</div>
                    </div>
                </div>
            </div>
            
            <div id="loops-tab" class="tab-content">
                <h3>Loops for Dynamic Content</h3>
                <div class="split-view">
                    <div class="code-panel">
                        <div class="code-header">ESD Clamps Table Loop</div>
                        <div class="code-content">
| Clamp Name | Type | ESD Rating | Application |
|------------|------|------------|-------------|
<span class="jinja-control">{% for clamp in approved_clamps %}</span>
| <span class="jinja-var">{{ clamp.name }}</span> | <span class="jinja-var">{{ clamp.type }}</span> | <span class="jinja-var">{{ clamp.rating }}</span> | <span class="jinja-var">{{ clamp.application | default("General I/O") }}</span> |
<span class="jinja-control">{% endfor %}</span>

<span class="jinja-comment"># Layout guidelines loop</span>
<span class="jinja-control">{% for guideline in latch_up_rules.layout_guidelines %}</span>
- <span class="jinja-var">{{ guideline }}</span>
<span class="jinja-control">{% endfor %}</span>
                        </div>
                    </div>
                    
                    <div class="output-panel">
                        <div class="output-header">Generated Table</div>
                        <div class="output-content">| Clamp Name | Type | ESD Rating | Application |
|------------|------|------------|-------------|
| Clamp_StdCell_P | Primary | 2kV HBM | Standard I/O |
| Clamp_SecCell_N | Secondary | 500V CDM | Internal Protection |
| Clamp_HiVolt_IO | High-Voltage | 4kV HBM | 5V I/O |

- Keep PMOS and NMOS devices separated by minimum 10Œºm
- Use guard rings around all analog circuits
- Implement substrate contacts every 50Œºm in dense digital areas</div>
                    </div>
                </div>
            </div>
            
            <div id="complex-tab" class="tab-content">
                <h3>Complex Nested Logic</h3>
                <div class="split-view">
                    <div class="code-panel">
                        <div class="code-header">Nested Loops with Conditionals</div>
                        <div class="code-content">
<span class="jinja-control">{% if design_rules is defined %}</span>
<span class="jinja-control">{% for category, rules in design_rules.items() %}</span>

#### <span class="jinja-var">{{ category | title }}</span>
<span class="jinja-control">{% for rule in rules %}</span>
- **<span class="jinja-var">{{ rule.name }}</span>:** <span class="jinja-var">{{ rule.value }}</span> (<span class="jinja-var">{{ rule.description | default("") }}</span>)
<span class="jinja-control">{% endfor %}</span>
<span class="jinja-control">{% endfor %}</span>
<span class="jinja-control">{% else %}</span>
- **Default rules apply**
<span class="jinja-control">{% endif %}</span>
                        </div>
                    </div>
                    
                    <div class="output-panel">
                        <div class="output-header">Generated Sections</div>
                        <div class="output-content">#### Metal Routing
- **ESD_Metal_Width:** 12Œºm minimum (Minimum metal width for primary ESD current paths)
- **ESD_Via_Array:** 4x redundancy (Via array sizing for ESD current paths)

#### Device Placement
- **ESD_Device_Spacing:** 20Œºm minimum (Minimum spacing between ESD protection devices)
- **Guard_Ring_Overlap:** 2Œºm minimum (Guard ring overlap with protected circuit)</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Complex Data -->
        <div id="data" class="demo-section" style="display: none;">
            <h2>üìä Complex Data Handling</h2>
            
            <p>Your project handles complex nested data structures from JSON configurations:</p>
            
            <div class="split-view">
                <div class="code-panel">
                    <div class="code-header">technology_A.json Structure</div>
                    <div class="code-content">
{
  <span class="jinja-string">"process_type"</span>: <span class="jinja-string">"28nm CMOS"</span>,
  <span class="jinja-string">"esd_levels"</span>: {
    <span class="jinja-string">"hbm"</span>: <span class="jinja-string">"2kV"</span>,
    <span class="jinja-string">"cdm"</span>: <span class="jinja-string">"500V"</span>,
    <span class="jinja-string">"mm"</span>: <span class="jinja-string">"200V"</span>
  },
  <span class="jinja-string">"approved_clamps"</span>: [
    {
      <span class="jinja-string">"name"</span>: <span class="jinja-string">"Clamp_StdCell_P"</span>,
      <span class="jinja-string">"type"</span>: <span class="jinja-string">"Primary"</span>,
      <span class="jinja-string">"rating"</span>: <span class="jinja-string">"2kV HBM"</span>
    }
  ]
}
                    </div>
                </div>
                
                <div class="code-panel">
                    <div class="code-header">Template Access Patterns</div>
                    <div class="code-content">
<span class="jinja-comment"># Simple property access</span>
<span class="jinja-var">{{ process_type }}</span>

<span class="jinja-comment"># Nested object access</span>
<span class="jinja-var">{{ esd_levels.hbm }}</span>
<span class="jinja-var">{{ esd_levels.cdm }}</span>

<span class="jinja-comment"># Array iteration</span>
<span class="jinja-control">{% for clamp in approved_clamps %}</span>
  <span class="jinja-var">{{ clamp.name }}</span> - <span class="jinja-var">{{ clamp.rating }}</span>
<span class="jinja-control">{% endfor %}</span>

<span class="jinja-comment"># Conditional existence</span>
<span class="jinja-control">{% if esd_levels.mm is defined %}</span>
  MM: <span class="jinja-var">{{ esd_levels.mm }}</span>
<span class="jinja-control">{% endif %}</span>
                    </div>
                </div>
            </div>
            
            <div class="tip">
                <strong>Data Access Patterns:</strong><br>
                ‚Ä¢ <code>object.property</code> - Access nested properties<br>
                ‚Ä¢ <code>array[0]</code> - Access array elements by index<br>
                ‚Ä¢ <code>if variable is defined</code> - Check if property exists<br>
                ‚Ä¢ <code>for item in array</code> - Iterate over arrays
            </div>
        </div>

        <!-- Generator Section -->
        <div id="generator" class="demo-section" style="display: none;">
            <h2>‚öôÔ∏è Template Processing</h2>
            
            <p>Your <code>generator.py</code> shows how to load and render templates with Python:</p>
            
            <div class="code-panel">
                <div class="code-header">generator.py - Template Processing</div>
                <div class="code-content">
<span class="jinja-control">from</span> jinja2 <span class="jinja-control">import</span> Environment, FileSystemLoader

<span class="jinja-control">def</span> <span class="jinja-var">generate_guideline_markdown</span>(technology_name: str) -> str:
    <span class="jinja-comment"># Load technology parameters from JSON</span>
    params = load_tech_params(technology_name)
    
    <span class="jinja-comment"># Initialize Jinja2 environment</span>
    env = Environment(loader=FileSystemLoader(CONFIG_PATH))
    template = env.get_template(MASTER_TEMPLATE_NAME)
    
    <span class="jinja-comment"># Render template with parameters</span>
    markdown_content = template.render(**params, technology_name=technology_name)
    <span class="jinja-control">return</span> markdown_content

<span class="jinja-control">def</span> <span class="jinja-var">load_tech_params</span>(technology_name: str) -> Dict[str, Any]:
    <span class="jinja-comment"># Load JSON configuration</span>
    param_file = CONFIG_PATH / f<span class="jinja-string">"{technology_name}.json"</span>
    <span class="jinja-control">with</span> open(param_file, <span class="jinja-string">'r'</span>, encoding=<span class="jinja-string">'utf-8'</span>) <span class="jinja-control">as</span> f:
        <span class="jinja-control">return</span> json.load(f)
                </div>
            </div>
            
            <h3>Key Processing Steps</h3>
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 15px; margin: 20px 0;">
                <div style="background: #e3f2fd; padding: 15px; border-radius: 8px; border-left: 4px solid #2196f3;">
                    <h4>1. Load Data</h4>
                    <p>Read JSON configuration files containing technology parameters</p>
                </div>
                
                <div style="background: #e8f5e8; padding: 15px; border-radius: 8px; border-left: 4px solid #4caf50;">
                    <h4>2. Create Environment</h4>
                    <p>Initialize Jinja2 with FileSystemLoader pointing to config directory</p>
                </div>
                
                <div style="background: #fff3e0; padding: 15px; border-radius: 8px; border-left: 4px solid #ff9800;">
                    <h4>3. Load Template</h4>
                    <p>Get the master_template.md file as a Jinja2 template object</p>
                </div>
                
                <div style="background: #fce4ec; padding: 15px; border-radius: 8px; border-left: 4px solid #e91e63;">
                    <h4>4. Render Output</h4>
                    <p>Combine template with data using render() to generate final markdown</p>
                </div>
            </div>
        </div>

        <!-- Live Playground -->
        <div id="playground" class="demo-section" style="display: none;">
            <h2>üß™ Live Template Playground</h2>
            
            <p>Try your own Jinja2 templates using real data from your project:</p>
            
            <div class="interactive-editor">
                <div class="editor-row">
                    <div class="editor-column">
                        <h4>üìä Data (JSON)</h4>
                        <textarea id="data-input" class="data-input" placeholder="Paste your technology JSON data here..."></textarea>
                    </div>
                    
                    <div class="editor-column">
                        <h4>üìù Template</h4>
                        <textarea id="template-input" class="template-input" placeholder="Write your Jinja2 template here..."></textarea>
                    </div>
                </div>
                
                <div style="text-align: center;">
                    <button class="btn" onclick="renderTemplate()">üé® Render Template</button>
                    <button class="btn btn-secondary" onclick="loadSampleData()">üìã Load Sample Data</button>
                    <button class="btn btn-secondary" onclick="loadSampleTemplate()">üìÑ Load Sample Template</button>
                </div>
                
                <div id="render-result" class="result-panel result-success" style="display: none;">
                    <strong>üéâ Rendered Output:</strong><br><br>
                    <div id="render-output"></div>
                </div>
                
                <div id="render-error" class="result-panel result-error" style="display: none;">
                    <strong>‚ùå Template Error:</strong><br><br>
                    <div id="error-output"></div>
                </div>
            </div>
            
            <h3>üéØ Quick Examples to Try</h3>
            <div class="example-grid">
                <div class="example-card" onclick="loadQuickExample('simple')">
                    <h5>Simple Variables</h5>
                    <code>{{ technology_name }}</code>
                    <p>Basic variable substitution</p>
                </div>
                
                <div class="example-card" onclick="loadQuickExample('table')">
                    <h5>ESD Clamps Table</h5>
                    <code>{% for clamp in approved_clamps %}</code>
                    <p>Generate markdown table</p>
                </div>
                
                <div class="example-card" onclick="loadQuickExample('conditional')">
                    <h5>Conditional Content</h5>
                    <code>{% if advanced_protection_scheme %}</code>
                    <p>Show content based on conditions</p>
                </div>
                
                <div class="example-card" onclick="loadQuickExample('nested')">
                    <h5>Nested Data</h5>
                    <code>{{ design_rules.metal_routing }}</code>
                    <p>Access complex nested objects</p>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Sample data from your project
        const sampleTechData = {
            "technology_name": "28nm_CMOS",
            "process_type": "28nm CMOS",
            "esd_levels": {
                "hbm": "2kV",
                "cdm": "500V",
                "mm": "200V"
            },
            "latch_up_rules": {
                "rule1": "All I/O cells must use guard rings with minimum 5Œºm width.",
                "nwell_psub_spacing_io": "8Œºm",
                "guard_ring_width": "5.0Œºm",
                "layout_guidelines": [
                    "Keep PMOS and NMOS devices separated by minimum 10Œºm",
                    "Use guard rings around all analog circuits",
                    "Implement substrate contacts every 50Œºm in dense digital areas"
                ]
            },
            "approved_clamps": [
                {
                    "name": "Clamp_StdCell_P",
                    "type": "Primary",
                    "rating": "2kV HBM",
                    "application": "Standard I/O"
                },
                {
                    "name": "Clamp_SecCell_N", 
                    "type": "Secondary",
                    "rating": "500V CDM",
                    "application": "Internal Protection"
                }
            ],
            "advanced_protection_scheme": true,
            "advanced_protection_scheme_details": "Multi-stage protection with RC-triggered power clamps",
            "design_rules": {
                "metal_routing": [
                    {
                        "name": "ESD_Metal_Width",
                        "value": "12Œºm minimum",
                        "description": "Minimum metal width for primary ESD current paths"
                    }
                ]
            }
        };

        function showSection(sectionId) {
            const sections = document.querySelectorAll('.demo-section');
            sections.forEach(section => section.style.display = 'none');
            document.getElementById(sectionId).style.display = 'block';
        }
        
        function switchTab(tabId) {
            document.querySelectorAll('.tab').forEach(tab => tab.classList.remove('active'));
            document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
            
            event.target.classList.add('active');
            document.getElementById(tabId).classList.add('active');
        }
        
        function loadSampleData() {
            document.getElementById('data-input').value = JSON.stringify(sampleTechData, null, 2);
        }
        
        function loadSampleTemplate() {
            const sampleTemplate = `# ESD Guidelines for {{ technology_name | upper }}

**Process Type:** {{ process_type }}

## ESD Levels
- **HBM:** {{ esd_levels.hbm }}
- **CDM:** {{ esd_levels.cdm }}
{% if esd_levels.mm is defined %}
- **MM:** {{ esd_levels.mm }}
{% endif %}

## Protection Scheme
{% if advanced_protection_scheme %}
**Advanced Protection:** {{ advanced_protection_scheme_details }}
{% else %}
**Standard Protection:** Basic clamp protection
{% endif %}

## Approved Clamps
| Name | Type | Rating | Application |
|------|------|--------|-------------|
{% for clamp in approved_clamps %}
| {{ clamp.name }} | {{ clamp.type }} | {{ clamp.rating }} | {{ clamp.application }} |
{% endfor %}`;
            
            document.getElementById('template-input').value = sampleTemplate;
        }
        
        function loadQuickExample(exampleType) {
            loadSampleData();
            
            const examples = {
                'simple': `# Technology: {{ technology_name }}
Process: {{ process_type }}
HBM Level: {{ esd_levels.hbm }}`,
                
                'table': `## ESD Clamps
| Name | Type | Rating |
|------|------|--------|
{% for clamp in approved_clamps %}
| {{ clamp.name }} | {{ clamp.type }} | {{ clamp.rating }} |
{% endfor %}`,
                
                'conditional': `## Protection Scheme
{% if advanced_protection_scheme %}
üîí **Advanced Protection**
Details: {{ advanced_protection_scheme_details }}
{% else %}
üîì **Standard Protection**
Basic clamp and guard ring approach
{% endif %}`,
                
                'nested': `## Design Rules
{% for category, rules in design_rules.items() %}
### {{ category | title }}
{% for rule in rules %}
- **{{ rule.name }}:** {{ rule.value }}
  {{ rule.description }}
{% endfor %}
{% endfor %}`
            };
            
            document.getElementById('template-input').value = examples[exampleType];
        }
        
        function renderTemplate() {
            const dataInput = document.getElementById('data-input').value;
            const templateInput = document.getElementById('template-input').value;
            const resultDiv = document.getElementById('render-result');
            const errorDiv = document.getElementById('render-error');
            const outputDiv = document.getElementById('render-output');
            const errorOutputDiv = document.getElementById('error-output');
            
            // Hide previous results
            resultDiv.style.display = 'none';
            errorDiv.style.display = 'none';
            
            try {
                // Parse JSON data
                const data = JSON.parse(dataInput || '{}');
                
                // Simple Jinja2-like template processing (simplified for demo)
                let output = templateInput;
                
                // Process variables {{ variable }}
                output = output.replace(/\{\{\s*([^}]+)\s*\}\}/g, (match, expr) => {
                    try {
                        // Handle filters
                        const parts = expr.split('|').map(p => p.trim());
                        let value = getNestedValue(data, parts[0]);
                        
                        // Apply filters
                        for (let i = 1; i < parts.length; i++) {
                            const filter = parts[i];
                            if (filter === 'upper') {
                                value = String(value).toUpperCase();
                            } else if (filter === 'lower') {
                                value = String(value).toLowerCase();
                            } else if (filter === 'title') {
                                value = String(value).replace(/\w\S*/g, (txt) => 
                                    txt.charAt(0).toUpperCase() + txt.substr(1).toLowerCase());
                            } else if (filter.startsWith('default(')) {
                                if (value === undefined || value === null) {
                                    const defaultValue = filter.match(/default\(["'](.*)["']\)/);
                                    value = defaultValue ? defaultValue[1] : '';
                                }
                            } else if (filter.includes('join(')) {
                                if (Array.isArray(value)) {
                                    const separator = filter.match(/join\(["'](.*)["']\)/);
                                    value = value.join(separator ? separator[1] : ', ');
                                }
                            }
                        }
                        
                        return value !== undefined ? value : '';
                    } catch (e) {
                        return `[Error: ${e.message}]`;
                    }
                });
                
                // Process if statements (simplified)
                output = output.replace(/\{%\s*if\s+([^%]+)\s*%\}(.*?)\{%\s*endif\s*%\}/gs, (match, condition, content) => {
                    try {
                        condition = condition.trim();
                        let shouldShow = false;
                        
                        if (condition.includes('is defined')) {
                            const varName = condition.replace(/\s+is\s+defined/g, '').trim();
                            shouldShow = getNestedValue(data, varName) !== undefined;
                        } else {
                            const value = getNestedValue(data, condition);
                            shouldShow = !!value;
                        }
                        
                        return shouldShow ? content : '';
                    } catch (e) {
                        return `[If Error: ${e.message}]`;
                    }
                });
                
                // Process if-else statements
                output = output.replace(/\{%\s*if\s+([^%]+)\s*%\}(.*?)\{%\s*else\s*%\}(.*?)\{%\s*endif\s*%\}/gs, (match, condition, ifContent, elseContent) => {
                    try {
                        const value = getNestedValue(data, condition.trim());
                        return value ? ifContent : elseContent;
                    } catch (e) {
                        return `[If-Else Error: ${e.message}]`;
                    }
                });
                
                // Process for loops (simplified)
                output = output.replace(/\{%\s*for\s+(\w+)\s+in\s+([^%]+)\s*%\}(.*?)\{%\s*endfor\s*%\}/gs, (match, itemVar, arrayName, loopContent) => {
                    try {
                        const array = getNestedValue(data, arrayName.trim());
                        if (!Array.isArray(array)) return '';
                        
                        return array.map(item => {
                            let itemContent = loopContent;
                            // Replace loop variable references
                            itemContent = itemContent.replace(new RegExp(`\\{\\{\\s*${itemVar}\\.(\\w+)\\s*\\}\\}`, 'g'), (m, prop) => {
                                return item && item[prop] !== undefined ? item[prop] : '';
                            });
                            itemContent = itemContent.replace(new RegExp(`\\{\\{\\s*${itemVar}\\s*\\}\\}`, 'g'), item);
                            return itemContent;
                        }).join('');
                    } catch (e) {
                        return `[Loop Error: ${e.message}]`;
                    }
                });
                
                outputDiv.textContent = output;
                resultDiv.style.display = 'block';
                
            } catch (error) {
                errorOutputDiv.textContent = error.message;
                errorDiv.style.display = 'block';
            }
        }
        
        function getNestedValue(obj, path) {
            return path.split('.').reduce((current, key) => {
                return current && current[key] !== undefined ? current[key] : undefined;
            }, obj);
        }
        
        // Initialize with sample data
        document.addEventListener('DOMContentLoaded', function() {
            showSection('basics');
            loadSampleData();
            loadSampleTemplate();
        });
    </script>
</body>
</html>